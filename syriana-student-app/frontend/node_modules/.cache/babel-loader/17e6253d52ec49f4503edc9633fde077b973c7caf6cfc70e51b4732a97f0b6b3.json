{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles=[]}=_ref;const{isAuthenticated,user,isLoading}=useAuth();// Show loading while checking authentication\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}// Redirect to login if not authenticated\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check role-based access\nif(allowedRoles.length>0&&!allowedRoles.includes(user===null||user===void 0?void 0:user.role)){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-white shadow-lg rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-red-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Access Denied\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-4\",children:[\"You don't have permission to access this page. Required role(s): \",allowedRoles.join(', ')]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.history.back(),className:\"btn btn-primary\",children:\"Go Back\"})]})});}return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useAuth","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","allowedRoles","isAuthenticated","user","isLoading","className","to","replace","length","includes","role","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","join","onClick","window","history","back"],"sources":["C:/Users/hesha/Desktop/project irad septempet-october 2025-hesham al dandan/syriana-student-app/client/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\nconst ProtectedRoute = ({ children, allowedRoles = [] }) => {\n  const { isAuthenticated, user, isLoading } = useAuth();\n\n  // Show loading while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Check role-based access\n  if (allowedRoles.length > 0 && !allowedRoles.includes(user?.role)) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"max-w-md w-full bg-white shadow-lg rounded-lg p-6 text-center\">\n          <div className=\"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center\">\n            <svg \n              className=\"w-8 h-8 text-red-600\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" \n              />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            Access Denied\n          </h3>\n          <p className=\"text-gray-600 mb-4\">\n            You don't have permission to access this page. \n            Required role(s): {allowedRoles.join(', ')}\n          </p>\n          <button\n            onClick={() => window.history.back()}\n            className=\"btn btn-primary\"\n          >\n            Go Back\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return children;\n};\n\nexport default ProtectedRoute;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAqC,IAApC,CAAEC,QAAQ,CAAEC,YAAY,CAAG,EAAG,CAAC,CAAAF,IAAA,CACrD,KAAM,CAAEG,eAAe,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAGX,OAAO,CAAC,CAAC,CAEtD;AACA,GAAIW,SAAS,CAAE,CACb,mBACET,IAAA,QAAKU,SAAS,CAAC,+CAA+C,CAAAL,QAAA,cAC5DL,IAAA,QAAKU,SAAS,CAAC,gEAAgE,CAAM,CAAC,CACnF,CAAC,CAEV,CAEA;AACA,GAAI,CAACH,eAAe,CAAE,CACpB,mBAAOP,IAAA,CAACH,QAAQ,EAACc,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA;AACA,GAAIN,YAAY,CAACO,MAAM,CAAG,CAAC,EAAI,CAACP,YAAY,CAACQ,QAAQ,CAACN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEO,IAAI,CAAC,CAAE,CACjE,mBACEf,IAAA,QAAKU,SAAS,CAAC,0DAA0D,CAAAL,QAAA,cACvEH,KAAA,QAAKQ,SAAS,CAAC,+DAA+D,CAAAL,QAAA,eAC5EL,IAAA,QAAKU,SAAS,CAAC,iFAAiF,CAAAL,QAAA,cAC9FL,IAAA,QACEU,SAAS,CAAC,sBAAsB,CAChCM,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,cAAc,CACrBC,OAAO,CAAC,WAAW,CAAAb,QAAA,cAEnBL,IAAA,SACEmB,aAAa,CAAC,OAAO,CACrBC,cAAc,CAAC,OAAO,CACtBC,WAAW,CAAE,CAAE,CACfC,CAAC,CAAC,2IAA2I,CAC9I,CAAC,CACC,CAAC,CACH,CAAC,cACNtB,IAAA,OAAIU,SAAS,CAAC,wCAAwC,CAAAL,QAAA,CAAC,eAEvD,CAAI,CAAC,cACLH,KAAA,MAAGQ,SAAS,CAAC,oBAAoB,CAAAL,QAAA,EAAC,mEAEd,CAACC,YAAY,CAACiB,IAAI,CAAC,IAAI,CAAC,EACzC,CAAC,cACJvB,IAAA,WACEwB,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,CAAE,CACrCjB,SAAS,CAAC,iBAAiB,CAAAL,QAAA,CAC5B,SAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAEA,MAAO,CAAAA,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}